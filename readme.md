# Intelligent Document Q&A Platform

This is a full-stack AI-powered application that allows you to build and chat with your own knowledge bases. Upload your documents, and get answers to your questions grounded in the provided sources, complete with citations.

The platform features a modern, responsive frontend built with Next.js and a powerful Python backend using Flask, LangChain, and Google's Gemini API for state-of-the-art conversational AI.

## âœ¨ Features

- **Multi-Knowledge Base Management**: Organize your documents into separate, logical knowledge bases.
- **Multi-File Upload**: Supports PDF, DOCX, and TXT files.
- **Conversational Q&A**: Engage in a chat-based dialogue with your documents. Answers are generated by a Gemini-powered agent and include citations pointing to the original source.
- **Semantic Search**: Perform a direct semantic search against the indexed documents.
- **RESTful API**: A comprehensive Flask-based API to manage knowledge bases, documents, and Q&A.
- **Modern UI**: A responsive and intuitive user interface built with Next.js and Tailwind CSS.
- **Containerized**: Easily run the entire stack using Docker Compose.

## âš™ï¸ Tech Stack

- **Frontend**: Next.js, React, TypeScript, Tailwind CSS
- **Backend**: Python, Flask, LangChain, Google Gemini, FAISS (via `vector_store`)
- **Orchestration**: Docker, Docker Compose

## ğŸ—‚ï¸ Project Structure

```
â”œâ”€â”€ backend.Dockerfile        # Dockerfile for the backend
â”œâ”€â”€ docker-compose.yml      # Docker Compose for orchestration
â”œâ”€â”€ Api.py                  # Main Flask application for the backend
â”œâ”€â”€ processing.py           # Document processing and vectorization
â”œâ”€â”€ document_cache.py       # Caching for document content
â”œâ”€â”€ requirements.txt        # Python dependencies
â”œâ”€â”€ uploads/                # Directory for uploaded files
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ Dockerfile          # Dockerfile for the frontend
â”‚   â”œâ”€â”€ package.json        # Node dependencies
â”‚   â”œâ”€â”€ next.config.ts      # Next.js configuration
â”‚   â””â”€â”€ app/                # Next.js App Router directory
â””â”€â”€ ...
```

## ğŸš€ Getting Started

### Prerequisites

- Docker and Docker Compose
- Node.js and npm (for local frontend development)
- Python 3.9+ (for local backend development)
- Google Gemini API Key

### Configuration

Create a `.env` file in the project root. The application will prioritize keys in the following order:
1. `GEMINI_API_KEY_AGENT`
2. `GEMINI_API_KEY_QUERY`
3. `GEMINI_API_KEY_GENERATE`

```env
# Used by the LangChain agent for the /ask endpoint
GEMINI_API_KEY_AGENT=YOUR_GEMINI_API_KEY
```
You can obtain an API key from [Google AI Studio](https://aistudio.google.com/).

### Running with Docker (Recommended)

This is the simplest way to get the entire application running.

1.  **Clone the repository:**
    ```bash
    git clone <your-repo-url>
    cd <repo-name>
    ```

2.  **Build and run the services:**
    ```bash
    docker compose up --build
    ```

3.  **Access the application:**
    -   Frontend: [http://localhost:3000](http://localhost:3000)
    -   Backend API: [http://localhost:5000](http://localhost:5000)

### Local Development

If you prefer to run the services manually without Docker:

**1. Backend (Python/Flask)**

```bash
# From the project root
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
python Api.py
```
The backend will be available at `http://localhost:5000`.

**2. Frontend (Next.js)**

```bash
# From the frontend directory
cd frontend
npm install
npm run dev
```
The frontend will be available at `http://localhost:3000`.

## ğŸ“š Usage Workflow

1.  **Navigate to the app** at [http://localhost:3000](http://localhost:3000).
2.  **Create a Knowledge Base**: By default, documents are added to the "Default" KB. You can create new KBs via the API or by extending the frontend.
3.  **Upload Documents**: Go to the "Upload" page and upload your PDF, DOCX, or TXT files.
4.  **Ask Questions**: Go to the "Ask" page. Select the Knowledge Base you want to interact with and start asking questions. The agent will provide answers with source citations.

## ğŸ”§ API Documentation

The backend provides the following RESTful endpoints:

### Knowledge Bases
| Endpoint | Method | Description |
|----------|--------|-------------|
| `/kb` | GET | List all knowledge bases. |
| `/kb` | POST | Create a new knowledge base. |
| `/kb/<kb_id>` | GET | Get details for a specific knowledge base. |

### Documents
| Endpoint | Method | Description |
|----------|--------|-------------|
| `/upload` | POST | Upload documents to a knowledge base. |
| `/documents` | GET | List documents (can filter by `kb_id`). |
| `/documents/<doc_id>` | GET | Get a document's metadata and content. |

### Q&A and Search
| Endpoint | Method | Description |
|----------|--------|-------------|
| `/ask` | POST | Ask a question to a knowledge base. |
| `/search`| POST | Perform semantic search on a knowledge base. |

### System
| Endpoint | Method | Description |
|----------|--------|-------------|
| `/reset` | POST | Clear all in-memory data (KBs, documents, etc.). |


## ğŸ¤ Contributing

Contributions are welcome! Please follow standard fork-and-pull-request workflow.

## ğŸ“„ License

Distributed under the MIT License.